var We=Object.defineProperty;var Me=(e,r,t)=>r in e?We(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var L=(e,r,t)=>(Me(e,typeof r!="symbol"?r+"":r,t),t);const $e=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerpolicy&&(u.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?u.credentials="include":o.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}};$e();var W=(e=>(e[e.BLACK=0]="BLACK",e[e.BLUE=1]="BLUE",e[e.GREEN=2]="GREEN",e[e.CYAN=3]="CYAN",e[e.RED=4]="RED",e[e.MAGENTA=5]="MAGENTA",e[e.YELLOW=6]="YELLOW",e[e.WHITE=7]="WHITE",e))(W||{});function Ue(e,r){return e|r}function Fe(e){const r=(4&e)===4?255:0,t=(2&e)===2?255:0,i=(1&e)===1?255:0;return`rgb(${r},${t},${i})`}function Xe(e){return W[e]}var g=(e=>(e[e.NORTH=0]="NORTH",e[e.EAST=1]="EAST",e[e.SOUTH=2]="SOUTH",e[e.WEST=3]="WEST",e[e.NONE=4]="NONE",e[e.SPLIT_EAST_WEST=5]="SPLIT_EAST_WEST",e[e.SPLIT_NORTH_SOUTH=6]="SPLIT_NORTH_SOUTH",e))(g||{});const De=[2,3,0,1];function Ge(e){const r=De[e];return r===void 0?4:r}var te=(e=>(e[e.Blocked=-2]="Blocked",e[e.Loop=-1]="Loop",e))(te||{});function Ke(e,r){return e.end===r.end&&e.color===r.color}var k=(e=>(e[e.FORWARD_SLASH=0]="FORWARD_SLASH",e[e.BACK_SLASH=1]="BACK_SLASH",e[e.BLACK_HOLE=2]="BLACK_HOLE",e[e.HORI_SPLIT=3]="HORI_SPLIT",e[e.VERT_SPLIT=4]="VERT_SPLIT",e[e.RED=5]="RED",e[e.BLUE=6]="BLUE",e[e.GREEN=7]="GREEN",e))(k||{});const je=[{dirs:[g.EAST,g.NORTH,g.WEST,g.SOUTH]},{dirs:[g.WEST,g.SOUTH,g.EAST,g.NORTH]},{dirs:[g.NONE,g.NONE,g.NONE,g.NONE]},{dirs:[g.EAST,g.NONE,g.EAST,g.SPLIT_NORTH_SOUTH]},{dirs:[g.NONE,g.NORTH,g.SPLIT_EAST_WEST,g.NORTH]},{color:W.RED},{color:W.BLUE},{color:W.GREEN}];function xe(e,r){const t=je[r];return t.dirs&&(e.dir=t.dirs[e.dir]),t.color&&(e.color=Ue(e.color,t.color)),e}function ye(e){switch(e){case g.NORTH:return{x:0,y:-1};case g.EAST:return{x:1,y:0};case g.SOUTH:return{x:0,y:1};case g.WEST:return{x:-1,y:0};default:return{x:0,y:0}}}function we(e,r){return C(e,ye(r))}function C(...e){return e.reduce((r,t,i)=>({x:r.x+t.x,y:r.y+t.y}),{x:0,y:0})}function ve(e,r){return{x:e.x-r.x,y:e.y-r.y}}function Te(e){return{x:e.x,y:e.y}}function qe(e){return ne(e,{x:-1,y:-1},(r,t)=>r>t)}function ne(e,r,t){return t(e.x,r.x)&&t(e.y,r.y)}function de(e,r,t){return ne(e,r,(i,o)=>i>=o)&&ne(e,t,(i,o)=>i<=o)}function Ee(e,r,t){return ne(e,r,(i,o)=>i>o)&&ne(e,t,(i,o)=>i<o)}function le(){const e=[];for(let t=0;t<5;t++)e[t]=[];const r={paths:[],grid:e,length:5,width:5};return ae(r),r}function Se(e){const r=e.x,t=e.y;return t===-1&&r>-1&&r<5?1+r:r===5&&t>-1&&t<5?6+t:t===5&&r>-1&&r<5?15-r:r===-1&&t>-1&&t<5?20-t:0}function Z(e){if(e<6)return{tile:{x:e-1,y:-1},dir:g.SOUTH,color:W.BLACK};if(e<11)return{tile:{x:5,y:e-6},dir:g.WEST,color:W.BLACK};if(e<16)return{tile:{x:-e+15,y:5},dir:g.NORTH,color:W.BLACK};if(e<21)return{tile:{x:-1,y:-e+20},dir:g.EAST,color:W.BLACK};throw new Error("Incorrect Edge")}function re(e,r){if(e.grid[r.y])return e.grid[r.y][r.x]}function me(e,r){return Ee(r,{x:-1,y:-1},{x:e.width,y:e.length})}function Le(e,r){return e.grid[r.tile.y][r.tile.x]=void 0,r.tile={x:-1,y:-1},ae(e),r}function Ae(e,r,t){me(e,r.tile)&&(e.grid[r.tile.y][r.tile.x]=void 0);const i=re(e,t);let o;return i&&(o=Le(e,i)),r.tile=t,e.grid[t.y][t.x]=r,ae(e),o}function ae(e){const r=[];for(let t=0;t<20;t++)r[t]={start:t+1,endings:ze(e,t+1)};e.paths=r}function ze(e,r){const t=[];function i(o,u){for(let h=0;h<100;h++){if(u.tile=we(u.tile,u.dir),!me(o,u.tile)){const n=Se(u.tile);t.push({end:n,color:u.color});return}const a=re(o,u.tile);if(a)switch(xe(u,a.pieceID),u.dir){case g.SPLIT_NORTH_SOUTH:u.dir=g.NORTH,i(o,{tile:u.tile,dir:g.SOUTH,color:u.color});break;case g.SPLIT_EAST_WEST:u.dir=g.EAST,i(o,{tile:u.tile,dir:g.WEST,color:u.color});break;case g.NONE:t.push({end:te.Blocked,color:u.color});return}}t.push({end:te.Loop,color:u.color})}return i(e,Z(r)),t.sort((o,u)=>o.end<u.end?-1:1),t}var q=(e=>(e[e.Daily=0]="Daily",e[e.Seed=1]="Seed",e[e.Custom=2]="Custom",e))(q||{});function he(e,r){if(e.endings.length!==r.endings.length)return!1;for(let t=0;t<e.endings.length;t++)if(!Ke(e.endings[t],r.endings[t]))return!1;return!0}function J(e){return{tile:Te(e.tile),dir:Ge(e.dir),color:e.color}}function Ye(e){return{tile:Te(e.tile),dir:e.dir,color:e.color}}const E=50,T=E/2;function Ve(e,r){return{x:Math.floor(e/E),y:Math.floor(r/E)}}function X(e){return{px:e.x*E,py:e.y*E}}class be{constructor(r,t,i,o,u,h=0,a=0){L(this,"tile");L(this,"widthInTiles");L(this,"heightInTiles");L(this,"offsetX");L(this,"offsetY");L(this,"img");this.img=new Image,this.img.onload=()=>{u()},this.img.src=r,this.tile=t,this.widthInTiles=i,this.heightInTiles=o,this.offsetX=h,this.offsetY=a}draw(r){const t=X(this.tile);r.drawImage(this.img,t.px+this.offsetX,t.py+this.offsetY)}processMouseClick(r,t,i){const o=ve(Ve(r,t),this.tile);return Ee(o,{x:-1,y:-1},{x:this.widthInTiles,y:this.heightInTiles})?o:null}}class Je extends be{constructor(t,i,o,u,h,a=0,n=0){super(t,i,o,u,h,a,n);L(this,"lasergrid");L(this,"selectedEdge");L(this,"drawPath");this.lasergrid=le(),this.selectedEdge=1,this.drawPath=[]}draw(t){super.draw(t);for(const o of D)de(o.tile,{x:0,y:0},{x:4,y:4})&&O[o.pieceID].drawAt(C(this.tile,o.tile,{x:1,y:1}),t);for(const o of this.drawPath){t.beginPath(),t.strokeStyle=Fe(o.color);const u=X(C(o.tile,{x:1,y:1}));u.px+=T,u.py+=T,t.moveTo(u.px,u.py);const h=ye(o.dir);t.lineTo(u.px+h.x*T,u.py+h.y*T),t.stroke()}let i=X(C(Z(this.selectedEdge).tile,{x:1,y:1}));if(t.strokeStyle="#FFFFFF",t.beginPath(),this.selectedEdge<6?(t.moveTo(i.px+T-5,i.py+E-5),t.lineTo(i.px+T,i.py+E),t.lineTo(i.px+T+5,i.py+E-5)):this.selectedEdge<11?(t.moveTo(i.px+5,i.py+T-5),t.lineTo(i.px,i.py+T),t.lineTo(i.px+5,i.py+T+5)):this.selectedEdge<16?(t.moveTo(i.px+T-5,i.py+5),t.lineTo(i.px+T,i.py),t.lineTo(i.px+T+5,i.py+5)):this.selectedEdge<21&&(t.moveTo(i.px+E-5,i.py+T-5),t.lineTo(i.px+E,i.py+T),t.lineTo(i.px+E-5,i.py+T+5)),t.stroke(),ie){t.globalAlpha=.1;for(const o of ie)i=X(C(Z(o.edge).tile,{x:1,y:1})),t.fillStyle=o.solved?"#00FF00":"#FF0000",t.fillRect(i.px,i.py,E,E);t.globalAlpha=1}for(let o=1;o<=20;o++)i=X(C(Z(o).tile,{x:1,y:1})),t.fillStyle="#000000",t.font="24px sans-serif",t.textBaseline="middle",t.fillText(o.toString(),i.px+T-t.measureText(o.toString()).width/2,i.py+T)}clear(){this.lasergrid=le(),this.selectedEdge=1,this.drawPath=[]}processMouseClick(t,i,o){const u=super.processMouseClick(t,i,o);if(console.log(o),u===null)return null;if(de(u,{x:1,y:1},{x:5,y:5})){const a=ve(u,{x:1,y:1}),n=re(this.lasergrid,a);if(n){const s=Le(this.lasergrid,n);o===0&&(ce.selectedPiece=s.index)}else Ae(this.lasergrid,D[ce.selectedPiece],a);fe(),this.calculateDrawPathWrapper()}const h=Se(C(u,{x:-1,y:-1}));return h!==0&&(this.selectedEdge=h),this.calculateDrawPathWrapper(),u}calculateDrawPathWrapper(){this.drawPath=[],this.calculateDrawPath(Z(this.selectedEdge))}calculateDrawPath(t){for(let i=0;i<100;i++){if(t.tile=we(t.tile,t.dir),!de(t.tile,{x:0,y:0},{x:4,y:4}))return;const o=re(this.lasergrid,t.tile);if(this.drawPath.push(J(t)),o)switch(xe(t,o.pieceID),t.dir){case g.SPLIT_NORTH_SOUTH:t.dir=g.NORTH,this.drawPath.push(J(t)),this.calculateDrawPath(J(t));break;case g.SPLIT_EAST_WEST:t.dir=g.EAST,this.drawPath.push(J(t)),this.calculateDrawPath(J(t));break;case g.NONE:return}this.drawPath.push(Ye(t))}}}class F{constructor(r,t){L(this,"isPlaced");L(this,"img");this.isPlaced=!1,this.img=new Image,this.img.onload=()=>{t()},this.img.src=r}drawAt(r,t){const i=X(r);t.drawImage(this.img,i.px,i.py)}}class Qe extends be{constructor(t,i,o,u,h,a=0,n=0){super(t,i,o,u,h,a,n);L(this,"selectedPiece");this.selectedPiece=0}draw(t){super.draw(t);for(let o=0;o<D.length;o++)O[D[o].pieceID].drawAt(C(this.tile,{x:o,y:0}),t);t.fillStyle="green",t.globalAlpha=.2;let i=X(C(this.tile,{x:this.selectedPiece,y:0}));t.fillRect(i.px,i.py,E,E),t.fillStyle="red";for(let o=0;o<D.length;o++){const u=D[o];o!==this.selectedPiece&&qe(u.tile)&&(i=X(C(this.tile,{x:o,y:0})),t.fillRect(i.px,i.py,E,E))}t.globalAlpha=1}processMouseClick(t,i,o){const u=super.processMouseClick(t,i,o);return u!==null&&(this.selectedPiece=u.x),u}getSelectedPieceComponent(){return O[this.selectedPiece]}}function se(e){const r=Xe(e.color);return e.end===te.Blocked?`blocked ${r}`:e.end===te.Loop?`loop ${r}`:`${e.end} ${r}`}function Pe(e){return Ze(e)+et(e)}function Ze(e){let r=`${e.start}`;return e.start<10?r+="  -> ":r+=" -> ",r}function et(e){if(e.endings.length>1){let r=`{${se(e.endings[0])}, `;for(let t=1;t<e.endings.length-1;t++)r+=`${se(e.endings[t])}, `;return r+=`${se(e.endings[e.endings.length-1])}}`,r}return se(e.endings[0])}document.getElementById("imported-pre");const j=document.getElementById("paths-pre"),I=document.getElementById("laser-game-canvas"),ee=document.getElementById("victory-p"),tt=document.getElementById("seed-level"),nt=document.getElementById("daily-level"),rt=document.getElementById("edges"),it=document.getElementById("seed"),Q=I.getContext("2d");var G=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ne={exports:{}};(function(e){(function(r,t,i){function o(n){var s=this,f=a();s.next=function(){var l=2091639*s.s0+s.c*23283064365386963e-26;return s.s0=s.s1,s.s1=s.s2,s.s2=l-(s.c=l|0)},s.c=1,s.s0=f(" "),s.s1=f(" "),s.s2=f(" "),s.s0-=f(n),s.s0<0&&(s.s0+=1),s.s1-=f(n),s.s1<0&&(s.s1+=1),s.s2-=f(n),s.s2<0&&(s.s2+=1),f=null}function u(n,s){return s.c=n.c,s.s0=n.s0,s.s1=n.s1,s.s2=n.s2,s}function h(n,s){var f=new o(n),l=s&&s.state,c=f.next;return c.int32=function(){return f.next()*4294967296|0},c.double=function(){return c()+(c()*2097152|0)*11102230246251565e-32},c.quick=c,l&&(typeof l=="object"&&u(l,f),c.state=function(){return u(f,{})}),c}function a(){var n=4022871197,s=function(f){f=String(f);for(var l=0;l<f.length;l++){n+=f.charCodeAt(l);var c=.02519603282416938*n;n=c>>>0,c-=n,c*=n,n=c>>>0,c-=n,n+=c*4294967296}return(n>>>0)*23283064365386963e-26};return s}t&&t.exports?t.exports=h:i&&i.amd?i(function(){return h}):this.alea=h})(G,e,!1)})(Ne);var Oe={exports:{}};(function(e){(function(r,t,i){function o(a){var n=this,s="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var l=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^l^l>>>8},a===(a|0)?n.x=a:s+=a;for(var f=0;f<s.length+64;f++)n.x^=s.charCodeAt(f)|0,n.next()}function u(a,n){return n.x=a.x,n.y=a.y,n.z=a.z,n.w=a.w,n}function h(a,n){var s=new o(a),f=n&&n.state,l=function(){return(s.next()>>>0)/4294967296};return l.double=function(){do var c=s.next()>>>11,d=(s.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},l.int32=s.next,l.quick=l,f&&(typeof f=="object"&&u(f,s),l.state=function(){return u(s,{})}),l}t&&t.exports?t.exports=h:i&&i.amd?i(function(){return h}):this.xor128=h})(G,e,!1)})(Oe);var Re={exports:{}};(function(e){(function(r,t,i){function o(a){var n=this,s="";n.next=function(){var l=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^(l^l<<1))|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,a===(a|0)?n.x=a:s+=a;for(var f=0;f<s.length+64;f++)n.x^=s.charCodeAt(f)|0,f==s.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function u(a,n){return n.x=a.x,n.y=a.y,n.z=a.z,n.w=a.w,n.v=a.v,n.d=a.d,n}function h(a,n){var s=new o(a),f=n&&n.state,l=function(){return(s.next()>>>0)/4294967296};return l.double=function(){do var c=s.next()>>>11,d=(s.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},l.int32=s.next,l.quick=l,f&&(typeof f=="object"&&u(f,s),l.state=function(){return u(s,{})}),l}t&&t.exports?t.exports=h:i&&i.amd?i(function(){return h}):this.xorwow=h})(G,e,!1)})(Re);var He={exports:{}};(function(e){(function(r,t,i){function o(a){var n=this;n.next=function(){var f=n.x,l=n.i,c,d;return c=f[l],c^=c>>>7,d=c^c<<24,c=f[l+1&7],d^=c^c>>>10,c=f[l+3&7],d^=c^c>>>3,c=f[l+4&7],d^=c^c<<7,c=f[l+7&7],c=c^c<<13,d^=c^c<<9,f[l]=d,n.i=l+1&7,d};function s(f,l){var c,d=[];if(l===(l|0))d[0]=l;else for(l=""+l,c=0;c<l.length;++c)d[c&7]=d[c&7]<<15^l.charCodeAt(c)+d[c+1&7]<<13;for(;d.length<8;)d.push(0);for(c=0;c<8&&d[c]===0;++c);for(c==8?d[7]=-1:d[c],f.x=d,f.i=0,c=256;c>0;--c)f.next()}s(n,a)}function u(a,n){return n.x=a.x.slice(),n.i=a.i,n}function h(a,n){a==null&&(a=+new Date);var s=new o(a),f=n&&n.state,l=function(){return(s.next()>>>0)/4294967296};return l.double=function(){do var c=s.next()>>>11,d=(s.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},l.int32=s.next,l.quick=l,f&&(f.x&&u(f,s),l.state=function(){return u(s,{})}),l}t&&t.exports?t.exports=h:i&&i.amd?i(function(){return h}):this.xorshift7=h})(G,e,!1)})(He);var _e={exports:{}};(function(e){(function(r,t,i){function o(a){var n=this;n.next=function(){var f=n.w,l=n.X,c=n.i,d,p;return n.w=f=f+1640531527|0,p=l[c+34&127],d=l[c=c+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,p=l[c]=p^d,n.i=c,p+(f^f>>>16)|0};function s(f,l){var c,d,p,m,$,H=[],z=128;for(l===(l|0)?(d=l,l=null):(l=l+"\0",d=0,z=Math.max(z,l.length)),p=0,m=-32;m<z;++m)l&&(d^=l.charCodeAt((m+32)%l.length)),m===0&&($=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,m>=0&&($=$+1640531527|0,c=H[m&127]^=d+$,p=c==0?p+1:0);for(p>=128&&(H[(l&&l.length||0)&127]=-1),p=127,m=4*128;m>0;--m)d=H[p+34&127],c=H[p=p+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,H[p]=d^c;f.w=$,f.X=H,f.i=p}s(n,a)}function u(a,n){return n.i=a.i,n.w=a.w,n.X=a.X.slice(),n}function h(a,n){a==null&&(a=+new Date);var s=new o(a),f=n&&n.state,l=function(){return(s.next()>>>0)/4294967296};return l.double=function(){do var c=s.next()>>>11,d=(s.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},l.int32=s.next,l.quick=l,f&&(f.X&&u(f,s),l.state=function(){return u(s,{})}),l}t&&t.exports?t.exports=h:i&&i.amd?i(function(){return h}):this.xor4096=h})(G,e,!1)})(_e);var Ce={exports:{}};(function(e){(function(r,t,i){function o(a){var n=this,s="";n.next=function(){var l=n.b,c=n.c,d=n.d,p=n.a;return l=l<<25^l>>>7^c,c=c-d|0,d=d<<24^d>>>8^p,p=p-l|0,n.b=l=l<<20^l>>>12^c,n.c=c=c-d|0,n.d=d<<16^c>>>16^p,n.a=p-l|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,a===Math.floor(a)?(n.a=a/4294967296|0,n.b=a|0):s+=a;for(var f=0;f<s.length+20;f++)n.b^=s.charCodeAt(f)|0,n.next()}function u(a,n){return n.a=a.a,n.b=a.b,n.c=a.c,n.d=a.d,n}function h(a,n){var s=new o(a),f=n&&n.state,l=function(){return(s.next()>>>0)/4294967296};return l.double=function(){do var c=s.next()>>>11,d=(s.next()>>>0)/4294967296,p=(c+d)/(1<<21);while(p===0);return p},l.int32=s.next,l.quick=l,f&&(typeof f=="object"&&u(f,s),l.state=function(){return u(s,{})}),l}t&&t.exports?t.exports=h:i&&i.amd?i(function(){return h}):this.tychei=h})(G,e,!1)})(Ce);var Ie={exports:{}};(function(e){(function(r,t,i){var o=256,u=6,h=52,a="random",n=i.pow(o,u),s=i.pow(2,h),f=s*2,l=o-1,c;function d(x,y,S){var v=[];y=y==!0?{entropy:!0}:y||{};var w=H($(y.entropy?[x,Y(t)]:x==null?z():x,3),v),A=new p(v),N=function(){for(var b=A.g(u),B=n,_=0;b<s;)b=(b+_)*o,B*=o,_=A.g(1);for(;b>=f;)b/=2,B/=2,_>>>=1;return(b+_)/B};return N.int32=function(){return A.g(4)|0},N.quick=function(){return A.g(4)/4294967296},N.double=N,H(Y(A.S),t),(y.pass||S||function(b,B,_,U){return U&&(U.S&&m(U,A),b.state=function(){return m(A,{})}),_?(i[a]=b,B):b})(N,w,"global"in y?y.global:this==i,y.state)}function p(x){var y,S=x.length,v=this,w=0,A=v.i=v.j=0,N=v.S=[];for(S||(x=[S++]);w<o;)N[w]=w++;for(w=0;w<o;w++)N[w]=N[A=l&A+x[w%S]+(y=N[w])],N[A]=y;(v.g=function(b){for(var B,_=0,U=v.i,oe=v.j,V=v.S;b--;)B=V[U=l&U+1],_=_*o+V[l&(V[U]=V[oe=l&oe+B])+(V[oe]=B)];return v.i=U,v.j=oe,_})(o)}function m(x,y){return y.i=x.i,y.j=x.j,y.S=x.S.slice(),y}function $(x,y){var S=[],v=typeof x,w;if(y&&v=="object")for(w in x)try{S.push($(x[w],y-1))}catch{}return S.length?S:v=="string"?x:x+"\0"}function H(x,y){for(var S=x+"",v,w=0;w<S.length;)y[l&w]=l&(v^=y[l&w]*19)+S.charCodeAt(w++);return Y(y)}function z(){try{var x;return c&&(x=c.randomBytes)?x=x(o):(x=new Uint8Array(o),(r.crypto||r.msCrypto).getRandomValues(x)),Y(x)}catch{var y=r.navigator,S=y&&y.plugins;return[+new Date,r,S,r.screen,Y(t)]}}function Y(x){return String.fromCharCode.apply(0,x)}if(H(i.random(),t),e.exports){e.exports=d;try{c=require("crypto")}catch{}}else i["seed"+a]=d})(typeof self!="undefined"?self:G,[],Math)})(Ie);var ot=Ne.exports,st=Oe.exports,lt=Re.exports,ct=He.exports,ut=_e.exports,at=Ce.exports,K=Ie.exports;K.alea=ot;K.xor128=st;K.xorwow=lt;K.xorshift7=ct;K.xor4096=ut;K.tychei=at;var Be=K;const ft=le();function dt(e=Date.now().toString(),r=5){const t=Be(e),i=[],o=[],u=[];for(let s=0;s<8;s++)u[s]={pieceID:Math.floor(t()*8),tile:{x:-1,y:-1},index:s};const h=le();u.forEach(s=>{for(;;){const f={x:Math.floor(t()*5),y:Math.floor(t()*5)};if(!re(h,f)){Ae(h,s,f);break}}});const a=h.paths;for(let s=0;s<a.length;s++)he(a[s],ft.paths[s])?o.push(a[s]):i.push(a[s]);pe(i,t);let n=i.slice(0,r);n.length<r&&(pe(o,t),n=n.concat(o.slice(0,r-n.length))),n.sort((s,f)=>s.start<f.start?-1:1);for(const s of u)s.tile={x:-1,y:-1};return{paths:n,availablePieces:u}}function pe(e,r){let t=e.length,i,o;for(;t;)o=Math.floor(r()*t--),i=e[t],e[t]=e[o],e[o]=i}const ce=new Qe("/toolbar.png",{x:0,y:7},8,1,P),R=new Je("/lasergrid.png",{x:0,y:0},7,7,P),O=[];let M,D=[],ie,ue=q.Custom;function ht(){I.addEventListener("click",ge),I.addEventListener("contextmenu",e=>{e.preventDefault(),ge(e)}),tt.addEventListener("click",vt),nt.addEventListener("click",Tt),O[k.FORWARD_SLASH]=new F("/pieces/mirror_forwardslash.png",P),O[k.BACK_SLASH]=new F("/pieces/mirror_backslash.png",P),O[k.BLACK_HOLE]=new F("/pieces/mirror_blackhole.png",P),O[k.HORI_SPLIT]=new F("/pieces/mirror_sidesplit.png",P),O[k.VERT_SPLIT]=new F("/pieces/mirror_upsplit.png",P),O[k.BLUE]=new F("/pieces/swatch_blue.png",P),O[k.RED]=new F("/pieces/swatch_red.png",P),O[k.GREEN]=new F("/pieces/swatch_green.png",P);for(let e=0;e<8;e++){const r={pieceID:e,tile:{x:-1,y:-1},index:e};D[e]=r}ae(R.lasergrid),fe(),R.calculateDrawPathWrapper()}function P(){Q.clearRect(0,0,I.width,I.height),Q.fillStyle="#9c9a9b",Q.fillRect(0,0,I.width,I.height),R.draw(Q),ce.draw(Q)}function ge(e){const r=wt(e.clientX,e.clientY);R.processMouseClick(r.x,r.y,e.button),ce.processMouseClick(r.x,r.y,e.button),fe(),M&&gt()&&(ue===q.Seed?ee.textContent="You beat the seed level!":ue===q.Daily&&(ee.textContent="Wow! You beat the daily level!"),ee.hidden=!1),P()}function pt(){if(M){ie=[];for(const e of M){const r=e.start;let t=!1;he(e,R.lasergrid.paths[e.start-1])&&(t=!0),ie.push({edge:r,solved:t})}}}function gt(){for(const e of ie)if(!e.solved)return!1;return!0}function fe(){M?(pt(),yt()):xt()}function xt(){j.innerHTML="";const e=R.lasergrid.paths;for(let r=0;r<20;r++){const t=e[r];let i=Pe(t);R.selectedEdge===r+1&&(i=`><b>${i}</b>`),j.innerHTML+=i,r<19&&(j.innerHTML+=`
`)}}function yt(){j.innerHTML="";const e=R.lasergrid.paths;for(let r=0;r<M.length;r++){const t=M[r],i=e[t.start-1];let o=Pe(t);o=he(i,t)?`<span style='color: green'>${o}</span>`:`<span style='color: red'>${o}</span>`,R.selectedEdge===t.start&&(o=`><b>${o}</b>`),j.innerHTML+=o,r<M.length-1&&(j.innerHTML+=`
`)}}function wt(e,r){const t=I.getBoundingClientRect();return{x:e-t.left*(I.width/t.width),y:r-t.top*(I.height/t.height)}}function ke(e,r){R.clear();const t=dt(e,r);M=[],t.paths.forEach(i=>M.push(i)),D=t.availablePieces,fe(),R.calculateDrawPathWrapper(),P()}function vt(){let e=it.value,r=parseInt(rt.value);e===""&&(e=Date.now().toString()),(isNaN(r)||r<1||r>20)&&(r=void 0),ue=q.Seed,ee.textContent=`Currently playing seed: ${e}`,ke(e,r)}function Tt(){const e=new Date().toDateString(),t=Be(e)()*10+5;ue=q.Daily,ee.textContent=`Currently playing daily level: ${e}`,ke(e,t)}window.addEventListener("load",()=>{ht()});
